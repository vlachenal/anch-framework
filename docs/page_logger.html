<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AnCH Framework: AnCH logger library documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Ankh-48x87.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AnCH Framework<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Another C++ Hack Framework</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('page_logger.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">AnCH logger library documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#log_intro_seq">Introduction</a></li>
<li class="level1"><a href="#log_prereq_sec">Prerequisites</a></li>
<li class="level1"><a href="#log_install_sec">Installation</a></li>
<li class="level1"><a href="#log_concept_sec">Usage</a><ul><li class="level2"><a href="#log_concept_conf_sec">Configuration file</a><ul><li class="level3"><a href="#log_concept_conf_writer_sec">Writers</a></li>
<li class="level3"><a href="#log_concept_conf_cat_sec">Categories</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#log_example_sec">Example</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="log_intro_seq"></a>
Introduction</h1>
<p >AnCH logger library aims to provide facilities for applications logging.</p>
<h1><a class="anchor" id="log_prereq_sec"></a>
Prerequisites</h1>
<ul>
<li>boost library (until standard C++ library implements regular expression)</li>
<li>pthread library</li>
<li>anch-resource library</li>
<li>anch-date library</li>
</ul>
<h1><a class="anchor" id="log_install_sec"></a>
Installation</h1>
<p >TODO fill this section</p>
<h1><a class="anchor" id="log_concept_sec"></a>
Usage</h1>
<p >The library is used in a similar way that log4j. So the classes which will be used are <a class="el" href="classanch_1_1logger_1_1_logger_factory.html">LoggerFactory</a> to initialize and retrieve logger instances and <a class="el" href="classanch_1_1logger_1_1_logger.html">Logger</a> to log messages.<br  />
 Messages are logged with level which can be (from the lowest to the highest):</p><ul>
<li><code>TRACE</code> </li>
<li><code>DEBUG</code> </li>
<li><code>INFO</code> </li>
<li><code>WARN</code> </li>
<li><code>ERROR</code> </li>
<li><code>FATAL</code> </li>
</ul>
<p >Each level has a method in Logger class which is named like level in lower case. These methods take a variable number of arguments which have to have stream injection operator definition.<br  />
 <br  />
 User can define several writers to log messages in separate files and console. Three writer types are available:</p><ul>
<li>Low priority writer: writer maintains a message queue which will be dequeued in another thread to avoid loosing time in writing files. This writer should be used with an high logging level to avoid to increase memory usage. This writer is thread safe.</li>
<li>Thread safe writer: writer is access with mutex to avoid concurrent access. This is the default writer.</li>
<li>Basic writer: writer which is not thread safe.</li>
</ul>
<p >Loggers are defined by category. They are retrieved if the logger name starts with category. Categories are associated with writers and minimum logging level.</p>
<h2><a class="anchor" id="log_concept_conf_sec"></a>
Configuration file</h2>
<p >AnCH logger configuration file is <code>anch-logger.conf</code> in the execution directory. You can defined another configuration file by defining <code>_ANCH_LOGGER_CONFIG_FILE_</code> variable.<br  />
 <br  />
 The file has to defined some writers and loggers (see sections below).<br  />
 Global configuration variables which can be set are:</p><ul>
<li><code>low.priority</code> : use low priority writers which will write messages in other threads. Possible value: <code>0</code> or <code>1</code> . Default to <code>0</code> . The value can be override by writers.</li>
<li><code>thread.safe</code> : writers are protected against concurrent access. Possible value: <code>0</code> or <code>1</code> . Default to <code>1</code> . The value can be override by writers.</li>
</ul>
<h3><a class="anchor" id="log_concept_conf_writer_sec"></a>
Writers</h3>
<p >Writers are declared in <code></code>[WRITER::&lt;writer&gt;] section.<br  />
 <code></code>[WRITER::console] is a predefined writer which log messages in <code>std::cout</code> . The only configuration value for console is <code>writer.pattern</code> .<br  />
 <br  />
 Configuration values for writters are:</p><ul>
<li><code>writer.pattern</code> : pattern for message formatting. Formatting values:<ul>
<li><code>%c</code> : the category (logger name).</li>
<li><code>%p</code> : the level.</li>
<li><code>%m</code> : the message.</li>
<li><code>%t</code> : the thread identifier.</li>
<li><code>%d{date_format}</code> : the date (using C++ date formatter).</li>
<li><code>%D{date_format}</code> : the date (using anch-date formatter with high precision clock).</li>
<li>Characters to print.</li>
</ul>
</li>
<li><code>writer.filepath</code> : log file path.</li>
<li><code>writer.max.size</code> : the maximum log file size. Optional. Possible value: number + 'K', 'M' or 'G' (for kilobyte, megabyte and gigabyte).</li>
<li><code>writer.max.rotate.index</code> : the maximum number of file to keep. Optional and active only if <code>writer.max.size</code> is set.</li>
<li><code>writer.low.priority</code> : use a low priority writer which will write messages in another thread. Possible value: <code>0</code> or <code>1</code> . Default to <code>0</code> .</li>
<li><code>writer.thread.safe</code> : writer is protected against concurrent access. Possible value: <code>0</code> or <code>1</code> . Default to <code>1</code> .</li>
</ul>
<h3><a class="anchor" id="log_concept_conf_cat_sec"></a>
Categories</h3>
<p >Categories are declared in <code></code>[CATEGORY::&lt;category&gt;] section.<br  />
 <code></code>[CATEGORY::default] is a predefined category which will be used if no other category match the wanted logger.<br  />
 <br  />
 Configuration values for categories are:</p><ul>
<li><code>logger.writers</code> : the writers to use. Possible value: writers list separated by <code>'</code>,' .</li>
<li><code>logger.level</code> : the minimum level of messages which will be logged by this logger. Possible value: level in lower case.</li>
</ul>
<h1><a class="anchor" id="log_example_sec"></a>
Example</h1>
<p >Configuration file: </p><div class="fragment"><div class="line"><span class="preprocessor"># Use low priority writers</span></div>
<div class="line">low.priority=1</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># std::cout writer</span></div>
<div class="line">[WRITER::console]</div>
<div class="line">writer.pattern=$d{%Y-%m-%d %H:%M:%S} - $c: $p - $m</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># A file writer</span></div>
<div class="line">[WRITER::test]</div>
<div class="line">writer.filepath=./test.log</div>
<div class="line">writer.pattern=$d{%Y-%m-%d %H:%M:%S} - $c [Thread $t] - $p - $m</div>
<div class="line">writer.max.size=10M</div>
<div class="line">writer.max.rotate.index=9</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Default logger configuration</span></div>
<div class="line">[CATEGORY::default]</div>
<div class="line">logger.writers=console</div>
<div class="line">logger.level=trace</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Logger configuration for my application</span></div>
<div class="line">[CATEGORY::org::myapp]</div>
<div class="line">logger.writers=console,test</div>
<div class="line">logger.level=debug</div>
</div><!-- fragment --><p >Application code: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;logger/loggerFactory.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> std::cout;</div>
<div class="line"><span class="keyword">using</span> std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code hl_class" href="classanch_1_1logger_1_1_logger_factory.html">anch::logger::LoggerFactory</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code hl_class" href="classanch_1_1logger_1_1_logger.html">anch::logger::Logger</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">void</span>) {</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> Logger&amp; LOG = LoggerFactory::getLogger(<span class="stringliteral">&quot;org::myapp::Test&quot;</span>); <span class="comment">// Use application logger</span></div>
<div class="line">  <span class="keyword">const</span> Logger&amp; DEF_LOG = LoggerFactory::getLogger(<span class="stringliteral">&quot;XYZ&quot;</span>); <span class="comment">// Use default logger</span></div>
<div class="line"> </div>
<div class="line">  DEF_LOG.info(_ANCH_LOGGER_CONFIG_FILE_); <span class="comment">// Log only in console</span></div>
<div class="line">  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 10 ; i++) {</div>
<div class="line">    LOG.info(<span class="stringliteral">&quot;Message n° &quot;</span>, i); <span class="comment">// Log in console and file</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassanch_1_1logger_1_1_logger_factory_html"><div class="ttname"><a href="classanch_1_1logger_1_1_logger_factory.html">anch::logger::LoggerFactory</a></div><div class="ttdoc">Logger factory.</div><div class="ttdef"><b>Definition:</b> loggerFactory.hpp:61</div></div>
<div class="ttc" id="aclassanch_1_1logger_1_1_logger_html"><div class="ttname"><a href="classanch_1_1logger_1_1_logger.html">anch::logger::Logger</a></div><div class="ttdef"><b>Definition:</b> logger.hpp:46</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
