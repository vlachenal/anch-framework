<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AnCH Framework: AnCH events library documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Ankh-48x87.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AnCH Framework
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Another C++ Hack Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AnCH events library documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#evt_intro_seq">Introduction</a></li>
<li class="level1"><a href="#evt_req_sec">Prerequisites</a></li>
<li class="level1"><a href="#evt_install_sec">Installation</a></li>
<li class="level1"><a href="#evt_concept_sec">Conception</a><ul><li class="level2"><a href="#evt_concept_observ_sec">Observer/Observable</a></li>
<li class="level2"><a href="#evt_concept_handler_sec">Event handler</a></li>
<li class="level2"><a href="#evt_concept_eventbus_sec">Event bus</a></li>
</ul>
</li>
<li class="level1"><a href="#evt_example_sec">Examples</a><ul><li class="level2"><a href="#evt_example_obs_sec">Observer/Observable</a></li>
<li class="level2"><a href="#evt_example_handler_sec">Event handler</a></li>
<li class="level2"><a href="#evt_example_eventbus_sec">Event bus</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="evt_intro_seq"></a>
Introduction</h1>
<p>AnCH events library aims to provide event programming facilities based on C++11 thread library.<br />
 It is based on C++ template. This is not a library but only header files.<br />
 <br />
 This library is based on observer/observable design pattern. So the base classes are <a class="el" href="classanch_1_1events_1_1_observer.html">anch::events::Observer&lt;T&gt;</a> and <a class="el" href="classanch_1_1events_1_1_observable.html">anch::events::Observable&lt;T&gt;</a>.</p>
<h1><a class="anchor" id="evt_req_sec"></a>
Prerequisites</h1>
<ul>
<li>anch-utils header files</li>
<li>pthread library</li>
</ul>
<h1><a class="anchor" id="evt_install_sec"></a>
Installation</h1>
<p>TODO fill this section</p>
<h1><a class="anchor" id="evt_concept_sec"></a>
Conception</h1>
<p>AnCH events library is header files only. So you don't need to link to library.</p>
<h2><a class="anchor" id="evt_concept_observ_sec"></a>
Observer/Observable</h2>
<p>These are the AnCH events library main classes. These classes are template classes.<br />
 Specialization concerns the event type that observer and observable can manage. An Observable&lt;type&gt; can be observe by any Observer&lt;type&gt;.<br />
 <br />
 <a class="el" href="classanch_1_1events_1_1_observer.html">Observer</a> is pure virtual. The only method which has to be implemented is Observer&lt;type&gt;::notify(const type&amp;).<br />
 Observers have to register and unregister themself to observable(s) by calling methods Observable&lt;type&gt;::addObserver(Observer&lt;type&gt;) and Observable&lt;type&gt;::removeObserver(Observer&lt;type&gt;). Each observable maintains an observers list to notify them.<br />
 <br />
 <a class="el" href="classanch_1_1events_1_1_observable.html">Observable</a> is fully implemented and ready to use. To notify observers, call method Observable&lt;type&gt;::notifyObservers(const type&amp;).</p>
<h2><a class="anchor" id="evt_concept_handler_sec"></a>
Event handler</h2>
<p><a class="el" href="classanch_1_1events_1_1_event_handler.html">EventHandler</a> is a template that aims to provide a way to inherits multiple times from Observer.<br />
 This class is based on the C++ curiously recurring pattern. Template parameters will be event type and observer implementation type. It implements the Observer&lt;type&gt;::notify(const type&amp;) by calling the callback method passed as argument in constructor.<br />
 <br />
 EventHandler provides also a simple way to register the observer in global event management (see <a class="el" href="page_events.html#evt_concept_eventbus_sec">Event bus</a>) through its constructors.</p>
<h2><a class="anchor" id="evt_concept_eventbus_sec"></a>
Event bus</h2>
<p><a class="el" href="classanch_1_1events_1_1_event_bus.html">EventBus</a> provides a way to fire events in global way.<br />
 Methods are the same than Observable.<br />
 Every methods can be accessed in static or instance way. The static method are named similar to instance method with the first letter in upper case. You should use the instance because the static will always retrieved the EventBus instance through mutex.<br />
 <br />
 EventBus has an additional method compare to Observable: scheduleDeferred which allow to put an event in a queue which will be dequeued later in another thread.</p>
<h1><a class="anchor" id="evt_example_sec"></a>
Examples</h1>
<p>You can read unitary tests in the test directory to have some other code example.</p>
<h2><a class="anchor" id="evt_example_obs_sec"></a>
Observer/Observable</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;events/observable.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;events/observer.hpp&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>StrObserver: <span class="keyword">public</span> <a class="code" href="classanch_1_1events_1_1_observer.html">anch::events::Observer</a>&lt;std::string&gt; {</div><div class="line">  <span class="keywordtype">void</span> <a class="code" href="classanch_1_1events_1_1_observer.html#ab54289b243cf4a5e3879adca527b5940">notify</a>(<span class="keyword">const</span> std::string&amp; event) noexcept {</div><div class="line">    std::cout &lt;&lt; <span class="keyword">event</span> &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_observable.html">anch::events::Observable&lt;std::string&gt;</a> strObservable;</div><div class="line">  StrObserver obs;</div><div class="line">  strObservable.<a class="code" href="classanch_1_1events_1_1_observable.html#a2ea3656ceb0792cca320d94c691630bb">addObserver</a>(obs);</div><div class="line">  strObservable.<a class="code" href="classanch_1_1events_1_1_observable.html#a43d7db84f8531abeea8b331baa179533">notifyObservers</a>(<span class="stringliteral">&quot;test&quot;</span>);</div><div class="line">  strObservable.<a class="code" href="classanch_1_1events_1_1_observable.html#acd9033d1d1d0248d37d6c36a37c30b27">removeObserver</a>(obs);</div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="evt_example_handler_sec"></a>
Event handler</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;events/eventHandler.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;events/observable.hpp&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Type1 {</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  std::string _message;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type1(<span class="keyword">const</span> std::string&amp; message): _message(message) { }</div><div class="line">  <span class="keyword">inline</span> <span class="keyword">const</span> std::string&amp; getMessage()<span class="keyword"> const </span>{</div><div class="line">    <span class="keywordflow">return</span> _message;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;</div><div class="line"><span class="keyword">class </span>Type1EventHandlerIface: <span class="keyword">public</span> <a class="code" href="classanch_1_1events_1_1_event_handler.html">anch::events::EventHandler</a>&lt;Type1,Derived&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type1EventHandlerIface(): <a class="code" href="namespaceanch.html">anch</a>::events::EventHandler&lt;Type1,Derived&gt;(&amp;Derived::onType1) { }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType1(<span class="keyword">const</span> Type1&amp; event) = 0;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>Type2 {</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keywordtype">int</span> _index;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type2(<span class="keywordtype">int</span> index): _index(index) { }</div><div class="line">  <span class="keyword">inline</span> <span class="keywordtype">int</span> Index()<span class="keyword"> const </span>{</div><div class="line">    <span class="keywordflow">return</span> _index;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;</div><div class="line"><span class="keyword">class </span>Type2EventHandlerIface: <span class="keyword">public</span> <a class="code" href="classanch_1_1events_1_1_event_handler.html">anch::events::EventHandler</a>&lt;Type2,Derived&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type2EventHandlerIface(): <a class="code" href="namespaceanch.html">anch</a>::events::EventHandler&lt;Type2,Derived&gt;(&amp;Derived::onType2) { }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType2(<span class="keyword">const</span> Type2&amp; event) = 0;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>TypesEventHandler: <span class="keyword">public</span> Type1EventHandlerIface&lt;TypesEventHandler&gt;, <span class="keyword">public</span> Type2EventHandlerIface&lt;TypesEventHandler&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  TypesEventHandler(): Type1EventHandlerIface&lt;TypesEventHandler&gt;(), Type2EventHandlerIface&lt;TypesEventHandler&gt;() { }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType1(<span class="keyword">const</span> Type1&amp; event)<span class="keyword"> override </span>{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Type1: &quot;</span> &lt;&lt; <span class="keyword">event</span>.getMessage() &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType2(<span class="keyword">const</span> Type2&amp; event)<span class="keyword"> override </span>{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Type2: &quot;</span> &lt;&lt; <span class="keyword">event</span>.Index() &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div><div class="line">  TypesEventHandler handler;</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_observable.html">anch::events::Observable&lt;Type1&gt;</a> obs1;</div><div class="line">  obs1.<a class="code" href="classanch_1_1events_1_1_observable.html#a2ea3656ceb0792cca320d94c691630bb">addObserver</a>(handler);</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_observable.html">anch::events::Observable&lt;Type2&gt;</a> obs2;</div><div class="line">  obs2.<a class="code" href="classanch_1_1events_1_1_observable.html#a2ea3656ceb0792cca320d94c691630bb">addObserver</a>(handler);</div><div class="line"></div><div class="line">  obs1.<a class="code" href="classanch_1_1events_1_1_observable.html#a43d7db84f8531abeea8b331baa179533">notifyObservers</a>(Type1(<span class="stringliteral">&quot;test&quot;</span>));</div><div class="line">  obs2.<a class="code" href="classanch_1_1events_1_1_observable.html#a43d7db84f8531abeea8b331baa179533">notifyObservers</a>(Type2(1));</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="evt_example_eventbus_sec"></a>
Event bus</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;events/eventHandler.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;events/observable.hpp&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Type1 {</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  std::string _message;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type1(<span class="keyword">const</span> std::string&amp; message): _message(message) { }</div><div class="line">  <span class="keyword">inline</span> <span class="keyword">const</span> std::string&amp; getMessage()<span class="keyword"> const </span>{</div><div class="line">    <span class="keywordflow">return</span> _message;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;</div><div class="line"><span class="keyword">class </span>Type1EventHandlerIface: <span class="keyword">public</span> <a class="code" href="classanch_1_1events_1_1_event_handler.html">anch::events::EventHandler</a>&lt;Type1,Derived&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type1EventHandlerIface(): <a class="code" href="namespaceanch.html">anch</a>::events::EventHandler&lt;Type1,Derived&gt;(&amp;Derived::onType1) { }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType1(<span class="keyword">const</span> Type1&amp; event) = 0;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>Type2 {</div><div class="line"><span class="keyword">private</span>:</div><div class="line">  <span class="keywordtype">int</span> _index;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type2(<span class="keywordtype">int</span> index): _index(index) { }</div><div class="line">  <span class="keyword">inline</span> <span class="keywordtype">int</span> Index()<span class="keyword"> const </span>{</div><div class="line">    <span class="keywordflow">return</span> _index;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;</div><div class="line"><span class="keyword">class </span>Type2EventHandlerIface: <span class="keyword">public</span> <a class="code" href="classanch_1_1events_1_1_event_handler.html">anch::events::EventHandler</a>&lt;Type2,Derived&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  Type2EventHandlerIface(): <a class="code" href="namespaceanch.html">anch</a>::events::EventHandler&lt;Type2,Derived&gt;(&amp;Derived::onType2) { }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType2(<span class="keyword">const</span> Type2&amp; event) = 0;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>TypesEventHandler: <span class="keyword">public</span> Type1EventHandlerIface&lt;TypesEventHandler&gt;, <span class="keyword">public</span> Type2EventHandlerIface&lt;TypesEventHandler&gt; {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType1(<span class="keyword">const</span> Type1&amp; event)<span class="keyword"> override </span>{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Type1: &quot;</span> &lt;&lt; <span class="keyword">event</span>.getMessage() &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> onType2(<span class="keyword">const</span> Type2&amp; event)<span class="keyword"> override </span>{</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Type2: &quot;</span> &lt;&lt; <span class="keyword">event</span>.Index() &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div><div class="line">  TypesEventHandler handler;</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_event_bus.html#a8faa1eec4f7a11f2833450ec3e940e2e">anch::events::EventBus&lt;Type1&gt;::AddObserver</a>(handler);</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_event_bus.html#a35d533d54191f5d7f9470afb33c6c704">anch::events::EventBus&lt;Type1&gt;::ScheduleDeferred</a>(Type1(<span class="stringliteral">&quot;test&quot;</span>));</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_event_bus.html#a8faa1eec4f7a11f2833450ec3e940e2e">anch::events::EventBus&lt;Type2&gt;::AddObserver</a>(handler);</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_event_bus.html#aea37ce96d068318e6654973e19d3caf9">anch::events::EventBus&lt;Type2&gt;::FireEvent</a>(Type2(1));</div><div class="line">  <a class="code" href="classanch_1_1events_1_1_event_bus.html#aea37ce96d068318e6654973e19d3caf9">anch::events::EventBus&lt;Type1&gt;::FireEvent</a>(Type1(<span class="stringliteral">&quot;test 2&quot;</span>));</div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 13 2017 18:55:21 for AnCH Framework by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
